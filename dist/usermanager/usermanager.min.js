(function(){var a,b,c,d,e,f,g,h,i,j;g=TEXT_MOSTRA_TOT+" ("+N_REGISTERED+(" usuari"+(1===N_REGISTERED?"":"s")+")"),h=TEXT_MOSTRA_TOT+" ("+N_UNREGISTERED+(" usuari"+(1===N_UNREGISTERED?"":"s")+")"),window.cachedRegistered=null,window.cachedUnregistered=null,a=function(a){var b,c,d,e;for(d=[],b=0,c=a.length;b<c;b++)e=a[b],d.push($("<tr>").append($("<td>").append(function(){var a;return null==e.alumne?$():$("<a>").attr("href",null!=(a=e.alumneUrl)?a:"#").text(e.alumne)})).append($("<td>").append($("<span>").addClass("username").text(e.username))).append($("<td>").append(function(){return e.admin?$("<span>").addClass("glyphicon glyphicon-ok").css("color","#008000"):$("<span>").addClass("glyphicon glyphicon-remove").css("color","#FF0000")})).append($("<td>").append($("<a>").addClass("btn btn-default").attr("href",e.changePasswordUrl).text("Canviar contrasenya"))).append($("<td>").append($("<a>").addClass("btn btn-danger").attr("href",e.deleteUrl).text("Eliminar"))));return d},c=function(b,c){return"success"!==c?(console.error("Error: "+c+" | "+(null!=b?b:"[No data]")),$()):void(window.cachedRegistered=a(b.registeredUsers))},b=function(a){var b,c,d,e;for(d=[],b=0,c=a.length;b<c;b++)e=a[b],d.push($("<tr>").append($("<td>").append($("<a>").attr("href",e.alumneUrl).text(e.alumne))).append($("<td>").append($("<span>").addClass("username").text(e.username))).append($("<td>").text(e.codi)).append($("<td>").append(function(){return $("<div>").addClass("btn-group").attr("role","group").append($("<a>").addClass("btn btn-primary").attr("href",e.changeAutoUrl).text("Generar")).append($("<a>").addClass("btn btn-default").attr("href",e.changeUrl).text("Canviar"))})).append($("<td>").append($("<a>").addClass("btn btn-danger").attr("href",e.cancelUrl).text("CancelÂ·lar"))));return d},d=function(a,c){return"success"!==c?(console.error("Error: "+c+" | "+(null!=a?a:"[No data]")),$()):void(window.cachedUnregistered=b(a.unregisteredUsers))},i=function(){var a,b,d,e,f;b=$("#table_registered"),d=$("#registered_toggle"),b.is(":hidden")?(f=function(){b.slideDown("slow"),d.text(TEXT_AMAGA)},null!=window.cachedRegistered?f():(a=$("#registered_spinner").show(),e=$.getJSON(REGISTERED_USERS_URL,c),$.when(e).done(function(){b.find("tbody").find("tr").remove().end().append(window.cachedRegistered),a.hide()}),f())):(b.slideUp("fast"),d.text(g))},j=function(){var a,b,c,e,f;b=$("#table_unregistered"),c=$("#unregistered_toggle"),b.is(":hidden")?(f=function(){b.slideDown("slow"),c.text(TEXT_AMAGA)},null!=window.cachedUnregistered?f():(a=$("#unregistered_spinner").show(),e=$.getJSON(UNREGISTERED_USERS_URL,d),$.when(e).done(function(){b.find("tbody").find("tr").remove().end().append(window.cachedUnregistered),a.hide()}),f())):(b.slideUp("fast"),c.text(h))},f=function(c){$("#resultats_cerca").show(),$("#n_res_total").show().text(c.registeredUsers.length+c.unregisteredUsers.length+" resultats"),c.registeredUsers.length>0?($("#cerca_registrats").show(),$("#n_res_registered").show().text(c.registeredUsers.length+" resultats"),$("#search_registered").show().find("tbody tr").remove().end().append(a(c.registeredUsers))):($("#n_res_registered").hide(),$("#cerca_registrats").hide(),$("#search_registered").hide()),c.unregisteredUsers.length>0?($("#cerca_no_registrats").show(),$("#n_res_unregistered").show().text(c.unregisteredUsers.length+" resultats"),$("#search_unregistered").show().find("tbody tr").remove().end().append(b(c.unregisteredUsers))):($("#n_res_unregistered").hide(),$("#cerca_no_registrats").hide(),$("#search_unregistered").hide())},e=function(){$("#resultats_cerca").hide(),$("#cerca_registrats").hide(),$("#cerca_no_registrats").hide(),$("#search_registered").hide(),$("#search_unregistered").hide(),$("#n_res_total").hide(),$("#n_res_registered").hide(),$("#n_res_unregistered").hide()},$(document).ready(function(){$("#unregistered_spinner").hide(),$("#registered_spinner").hide(),N_REGISTERED<=MAX_DISPLAY&&"undefined"!=typeof REGISTERED&&null!==REGISTERED?($("#registered_toggle").hide(),$("#table_registered tbody").find("tr").remove().end().append(a(REGISTERED))):($("#table_registered").hide(),$("#registered_toggle").text(g).click(i)),N_UNREGISTERED<=MAX_DISPLAY&&"undefined"!=typeof UNREGISTERED&&null!==UNREGISTERED?($("#unregistered_toggle").hide(),$("#table_unregistered tbody").find("tr").remove().end().append(b(UNREGISTERED))):($("#table_unregistered").hide(),$("#unregistered_toggle").text(h).click(j)),e(),$("#search_field").keyup(function(a){13===a.keyCode&&$("#search_btn").click()}),$("#search_btn").click(function(){var a;return(a=$("#search_field").val())?void $.getJSON(SEARCH_URL,{q:a},function(a,b){return"success"!==b?void console.error("Error: "+b+" | "+(null!=a?a:"[No data]")):void f(a)}):void e()})})}).call(this);